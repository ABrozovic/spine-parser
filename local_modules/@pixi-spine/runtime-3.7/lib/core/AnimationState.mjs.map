{"version":3,"file":"AnimationState.mjs","sources":["../../src/core/AnimationState.ts"],"sourcesContent":["import { IAnimationState, IAnimationStateListener, ITrackEntry, MathUtils, MixBlend, MixDirection, Pool, IntSet, Utils } from '@pixi-spine/base';\r\nimport { Animation, AttachmentTimeline, DrawOrderTimeline, RotateTimeline, Timeline } from './Animation';\r\nimport type { AnimationStateData } from './AnimationStateData';\r\nimport type { Event } from './Event';\r\nimport type { Skeleton } from './Skeleton';\r\n\r\n/**\r\n * @public\r\n */\r\nexport class AnimationState implements IAnimationState<AnimationStateData> {\r\n    static emptyAnimation = new Animation('<empty>', [], 0);\r\n    static SUBSEQUENT = 0;\r\n    static FIRST = 1;\r\n    static HOLD = 2;\r\n    static HOLD_MIX = 3;\r\n\r\n    data: AnimationStateData;\r\n    tracks = new Array<TrackEntry>();\r\n    events = new Array<Event>();\r\n    listeners = new Array<AnimationStateListener>();\r\n    queue = new EventQueue(this);\r\n    propertyIDs = new IntSet();\r\n    animationsChanged = false;\r\n    timeScale = 1;\r\n\r\n    trackEntryPool = new Pool<TrackEntry>(() => new TrackEntry());\r\n\r\n    constructor(data: AnimationStateData) {\r\n        this.data = data;\r\n    }\r\n\r\n    update(delta: number) {\r\n        delta *= this.timeScale;\r\n        const tracks = this.tracks;\r\n\r\n        for (let i = 0, n = tracks.length; i < n; i++) {\r\n            const current = tracks[i];\r\n\r\n            if (current == null) continue;\r\n\r\n            current.animationLast = current.nextAnimationLast;\r\n            current.trackLast = current.nextTrackLast;\r\n\r\n            let currentDelta = delta * current.timeScale;\r\n\r\n            if (current.delay > 0) {\r\n                current.delay -= currentDelta;\r\n                if (current.delay > 0) continue;\r\n                currentDelta = -current.delay;\r\n                current.delay = 0;\r\n            }\r\n\r\n            let next = current.next;\r\n\r\n            if (next != null) {\r\n                // When the next entry's delay is passed, change to the next entry, preserving leftover time.\r\n                const nextTime = current.trackLast - next.delay;\r\n\r\n                if (nextTime >= 0) {\r\n                    next.delay = 0;\r\n                    next.trackTime = current.timeScale == 0 ? 0 : (nextTime / current.timeScale + delta) * next.timeScale;\r\n                    current.trackTime += currentDelta;\r\n                    this.setCurrent(i, next, true);\r\n                    while (next.mixingFrom != null) {\r\n                        next.mixTime += delta;\r\n                        next = next.mixingFrom;\r\n                    }\r\n                    continue;\r\n                }\r\n            } else if (current.trackLast >= current.trackEnd && current.mixingFrom == null) {\r\n                tracks[i] = null;\r\n                this.queue.end(current);\r\n                this.disposeNext(current);\r\n                continue;\r\n            }\r\n            if (current.mixingFrom != null && this.updateMixingFrom(current, delta)) {\r\n                // End mixing from entries once all have completed.\r\n                let from = current.mixingFrom;\r\n\r\n                current.mixingFrom = null;\r\n                if (from != null) from.mixingTo = null;\r\n                while (from != null) {\r\n                    this.queue.end(from);\r\n                    from = from.mixingFrom;\r\n                }\r\n            }\r\n\r\n            current.trackTime += currentDelta;\r\n        }\r\n\r\n        this.queue.drain();\r\n    }\r\n\r\n    updateMixingFrom(to: TrackEntry, delta: number): boolean {\r\n        const from = to.mixingFrom;\r\n\r\n        if (from == null) return true;\r\n\r\n        const finished = this.updateMixingFrom(from, delta);\r\n\r\n        from.animationLast = from.nextAnimationLast;\r\n        from.trackLast = from.nextTrackLast;\r\n\r\n        // Require mixTime > 0 to ensure the mixing from entry was applied at least once.\r\n        if (to.mixTime > 0 && to.mixTime >= to.mixDuration) {\r\n            // Require totalAlpha == 0 to ensure mixing is complete, unless mixDuration == 0 (the transition is a single frame).\r\n            if (from.totalAlpha == 0 || to.mixDuration == 0) {\r\n                to.mixingFrom = from.mixingFrom;\r\n                if (from.mixingFrom != null) from.mixingFrom.mixingTo = to;\r\n                to.interruptAlpha = from.interruptAlpha;\r\n                this.queue.end(from);\r\n            }\r\n\r\n            return finished;\r\n        }\r\n\r\n        from.trackTime += delta * from.timeScale;\r\n        to.mixTime += delta;\r\n\r\n        return false;\r\n    }\r\n\r\n    apply(skeleton: Skeleton): boolean {\r\n        if (skeleton == null) throw new Error('skeleton cannot be null.');\r\n        if (this.animationsChanged) this._animationsChanged();\r\n\r\n        const events = this.events;\r\n        const tracks = this.tracks;\r\n        let applied = false;\r\n\r\n        for (let i = 0, n = tracks.length; i < n; i++) {\r\n            const current = tracks[i];\r\n\r\n            if (current == null || current.delay > 0) continue;\r\n            applied = true;\r\n            const blend: MixBlend = i == 0 ? MixBlend.first : current.mixBlend;\r\n\r\n            // Apply mixing from entries first.\r\n            let mix = current.alpha;\r\n\r\n            if (current.mixingFrom != null) mix *= this.applyMixingFrom(current, skeleton, blend);\r\n            else if (current.trackTime >= current.trackEnd && current.next == null) mix = 0;\r\n\r\n            // Apply current entry.\r\n            const animationLast = current.animationLast;\r\n            const animationTime = current.getAnimationTime();\r\n            const timelineCount = current.animation.timelines.length;\r\n            const timelines = current.animation.timelines;\r\n\r\n            if ((i == 0 && mix == 1) || blend == MixBlend.add) {\r\n                for (let ii = 0; ii < timelineCount; ii++) {\r\n                    // Fixes issue #302 on IOS9 where mix, blend sometimes became undefined and caused assets\r\n                    // to sometimes stop rendering when using color correction, as their RGBA values become NaN.\r\n                    // (https://github.com/pixijs/pixi-spine/issues/302)\r\n                    Utils.webkit602BugfixHelper(mix, blend);\r\n                    timelines[ii].apply(skeleton, animationLast, animationTime, events, mix, blend, MixDirection.mixIn);\r\n                }\r\n            } else {\r\n                const timelineMode = current.timelineMode;\r\n\r\n                const firstFrame = current.timelinesRotation.length == 0;\r\n\r\n                if (firstFrame) Utils.setArraySize(current.timelinesRotation, timelineCount << 1, null);\r\n                const timelinesRotation = current.timelinesRotation;\r\n\r\n                for (let ii = 0; ii < timelineCount; ii++) {\r\n                    const timeline = timelines[ii];\r\n                    const timelineBlend = timelineMode[ii] == AnimationState.SUBSEQUENT ? blend : MixBlend.setup;\r\n\r\n                    if (timeline instanceof RotateTimeline) {\r\n                        this.applyRotateTimeline(timeline, skeleton, animationTime, mix, timelineBlend, timelinesRotation, ii << 1, firstFrame);\r\n                    } else {\r\n                        // This fixes the WebKit 602 specific issue described at http://esotericsoftware.com/forum/iOS-10-disappearing-graphics-10109\r\n                        Utils.webkit602BugfixHelper(mix, blend);\r\n                        timeline.apply(skeleton, animationLast, animationTime, events, mix, timelineBlend, MixDirection.mixIn);\r\n                    }\r\n                }\r\n            }\r\n            this.queueEvents(current, animationTime);\r\n            events.length = 0;\r\n            current.nextAnimationLast = animationTime;\r\n            current.nextTrackLast = current.trackTime;\r\n        }\r\n\r\n        this.queue.drain();\r\n\r\n        return applied;\r\n    }\r\n\r\n    applyMixingFrom(to: TrackEntry, skeleton: Skeleton, blend: MixBlend) {\r\n        const from = to.mixingFrom;\r\n\r\n        if (from.mixingFrom != null) this.applyMixingFrom(from, skeleton, blend);\r\n\r\n        let mix = 0;\r\n\r\n        if (to.mixDuration == 0) {\r\n            // Single frame mix to undo mixingFrom changes.\r\n            mix = 1;\r\n            if (blend == MixBlend.first) blend = MixBlend.setup;\r\n        } else {\r\n            mix = to.mixTime / to.mixDuration;\r\n            if (mix > 1) mix = 1;\r\n            if (blend != MixBlend.first) blend = from.mixBlend;\r\n        }\r\n\r\n        const events = mix < from.eventThreshold ? this.events : null;\r\n        const attachments = mix < from.attachmentThreshold;\r\n        const drawOrder = mix < from.drawOrderThreshold;\r\n        const animationLast = from.animationLast;\r\n        const animationTime = from.getAnimationTime();\r\n        const timelineCount = from.animation.timelines.length;\r\n        const timelines = from.animation.timelines;\r\n        const alphaHold = from.alpha * to.interruptAlpha;\r\n        const alphaMix = alphaHold * (1 - mix);\r\n\r\n        if (blend == MixBlend.add) {\r\n            for (let i = 0; i < timelineCount; i++) timelines[i].apply(skeleton, animationLast, animationTime, events, alphaMix, blend, MixDirection.mixOut);\r\n        } else {\r\n            const timelineMode = from.timelineMode;\r\n            const timelineHoldMix = from.timelineHoldMix;\r\n\r\n            const firstFrame = from.timelinesRotation.length == 0;\r\n\r\n            if (firstFrame) Utils.setArraySize(from.timelinesRotation, timelineCount << 1, null);\r\n            const timelinesRotation = from.timelinesRotation;\r\n\r\n            from.totalAlpha = 0;\r\n            for (let i = 0; i < timelineCount; i++) {\r\n                const timeline = timelines[i];\r\n                let direction = MixDirection.mixOut;\r\n                let timelineBlend: MixBlend;\r\n                let alpha = 0;\r\n\r\n                switch (timelineMode[i]) {\r\n                    case AnimationState.SUBSEQUENT:\r\n                        if (!attachments && timeline instanceof AttachmentTimeline) continue;\r\n                        if (!drawOrder && timeline instanceof DrawOrderTimeline) continue;\r\n                        timelineBlend = blend;\r\n                        alpha = alphaMix;\r\n                        break;\r\n                    case AnimationState.FIRST:\r\n                        timelineBlend = MixBlend.setup;\r\n                        alpha = alphaMix;\r\n                        break;\r\n                    case AnimationState.HOLD:\r\n                        timelineBlend = MixBlend.setup;\r\n                        alpha = alphaHold;\r\n                        break;\r\n                    default:\r\n                        timelineBlend = MixBlend.setup;\r\n                        const holdMix = timelineHoldMix[i];\r\n\r\n                        alpha = alphaHold * Math.max(0, 1 - holdMix.mixTime / holdMix.mixDuration);\r\n                        break;\r\n                }\r\n                from.totalAlpha += alpha;\r\n                if (timeline instanceof RotateTimeline) this.applyRotateTimeline(timeline, skeleton, animationTime, alpha, timelineBlend, timelinesRotation, i << 1, firstFrame);\r\n                else {\r\n                    // This fixes the WebKit 602 specific issue described at http://esotericsoftware.com/forum/iOS-10-disappearing-graphics-10109\r\n                    Utils.webkit602BugfixHelper(alpha, blend);\r\n                    if (timelineBlend == MixBlend.setup) {\r\n                        if (timeline instanceof AttachmentTimeline) {\r\n                            if (attachments) direction = MixDirection.mixOut;\r\n                        } else if (timeline instanceof DrawOrderTimeline) {\r\n                            if (drawOrder) direction = MixDirection.mixOut;\r\n                        }\r\n                    }\r\n                    timeline.apply(skeleton, animationLast, animationTime, events, alpha, timelineBlend, direction);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (to.mixDuration > 0) this.queueEvents(from, animationTime);\r\n        this.events.length = 0;\r\n        from.nextAnimationLast = animationTime;\r\n        from.nextTrackLast = from.trackTime;\r\n\r\n        return mix;\r\n    }\r\n\r\n    applyRotateTimeline(timeline: Timeline, skeleton: Skeleton, time: number, alpha: number, blend: MixBlend, timelinesRotation: Array<number>, i: number, firstFrame: boolean) {\r\n        if (firstFrame) timelinesRotation[i] = 0;\r\n\r\n        if (alpha == 1) {\r\n            timeline.apply(skeleton, 0, time, null, 1, blend, MixDirection.mixIn);\r\n\r\n            return;\r\n        }\r\n\r\n        const rotateTimeline = timeline as RotateTimeline;\r\n        const frames = rotateTimeline.frames;\r\n        const bone = skeleton.bones[rotateTimeline.boneIndex];\r\n        let r1 = 0;\r\n        let r2 = 0;\r\n\r\n        if (time < frames[0]) {\r\n            switch (blend) {\r\n                case MixBlend.setup:\r\n                    bone.rotation = bone.data.rotation;\r\n                default:\r\n                    return;\r\n                case MixBlend.first:\r\n                    r1 = bone.rotation;\r\n                    r2 = bone.data.rotation;\r\n            }\r\n        } else {\r\n            r1 = blend == MixBlend.setup ? bone.data.rotation : bone.rotation;\r\n            if (time >= frames[frames.length - RotateTimeline.ENTRIES])\r\n                // Time is after last frame.\r\n                r2 = bone.data.rotation + frames[frames.length + RotateTimeline.PREV_ROTATION];\r\n            else {\r\n                // Interpolate between the previous frame and the current frame.\r\n                const frame = Animation.binarySearch(frames, time, RotateTimeline.ENTRIES);\r\n                const prevRotation = frames[frame + RotateTimeline.PREV_ROTATION];\r\n                const frameTime = frames[frame];\r\n                const percent = rotateTimeline.getCurvePercent((frame >> 1) - 1, 1 - (time - frameTime) / (frames[frame + RotateTimeline.PREV_TIME] - frameTime));\r\n\r\n                r2 = frames[frame + RotateTimeline.ROTATION] - prevRotation;\r\n                r2 -= (16384 - ((16384.499999999996 - r2 / 360) | 0)) * 360;\r\n                r2 = prevRotation + r2 * percent + bone.data.rotation;\r\n                r2 -= (16384 - ((16384.499999999996 - r2 / 360) | 0)) * 360;\r\n            }\r\n        }\r\n\r\n        // Mix between rotations using the direction of the shortest route on the first frame while detecting crosses.\r\n        let total = 0;\r\n        let diff = r2 - r1;\r\n\r\n        diff -= (16384 - ((16384.499999999996 - diff / 360) | 0)) * 360;\r\n        if (diff == 0) {\r\n            total = timelinesRotation[i];\r\n        } else {\r\n            let lastTotal = 0;\r\n            let lastDiff = 0;\r\n\r\n            if (firstFrame) {\r\n                lastTotal = 0;\r\n                lastDiff = diff;\r\n            } else {\r\n                lastTotal = timelinesRotation[i]; // Angle and direction of mix, including loops.\r\n                lastDiff = timelinesRotation[i + 1]; // Difference between bones.\r\n            }\r\n            const current = diff > 0;\r\n            let dir = lastTotal >= 0;\r\n            // Detect cross at 0 (not 180).\r\n\r\n            if (MathUtils.signum(lastDiff) != MathUtils.signum(diff) && Math.abs(lastDiff) <= 90) {\r\n                // A cross after a 360 rotation is a loop.\r\n                if (Math.abs(lastTotal) > 180) lastTotal += 360 * MathUtils.signum(lastTotal);\r\n                dir = current;\r\n            }\r\n            total = diff + lastTotal - (lastTotal % 360); // Store loops as part of lastTotal.\r\n            if (dir != current) total += 360 * MathUtils.signum(lastTotal);\r\n            timelinesRotation[i] = total;\r\n        }\r\n        timelinesRotation[i + 1] = diff;\r\n        r1 += total * alpha;\r\n        bone.rotation = r1 - (16384 - ((16384.499999999996 - r1 / 360) | 0)) * 360;\r\n    }\r\n\r\n    queueEvents(entry: TrackEntry, animationTime: number) {\r\n        const animationStart = entry.animationStart;\r\n        const animationEnd = entry.animationEnd;\r\n        const duration = animationEnd - animationStart;\r\n        const trackLastWrapped = entry.trackLast % duration;\r\n\r\n        // Queue events before complete.\r\n        const events = this.events;\r\n        let i = 0;\r\n        const n = events.length;\r\n\r\n        for (; i < n; i++) {\r\n            const event = events[i];\r\n\r\n            if (event.time < trackLastWrapped) break;\r\n            if (event.time > animationEnd) continue; // Discard events outside animation start/end.\r\n            this.queue.event(entry, event);\r\n        }\r\n\r\n        // Queue complete if completed a loop iteration or the animation.\r\n        let complete = false;\r\n\r\n        if (entry.loop) complete = duration == 0 || trackLastWrapped > entry.trackTime % duration;\r\n        else complete = animationTime >= animationEnd && entry.animationLast < animationEnd;\r\n        if (complete) this.queue.complete(entry);\r\n\r\n        // Queue events after complete.\r\n        for (; i < n; i++) {\r\n            const event = events[i];\r\n\r\n            if (event.time < animationStart) continue; // Discard events outside animation start/end.\r\n            this.queue.event(entry, events[i]);\r\n        }\r\n    }\r\n\r\n    clearTracks() {\r\n        const oldDrainDisabled = this.queue.drainDisabled;\r\n\r\n        this.queue.drainDisabled = true;\r\n        for (let i = 0, n = this.tracks.length; i < n; i++) this.clearTrack(i);\r\n        this.tracks.length = 0;\r\n        this.queue.drainDisabled = oldDrainDisabled;\r\n        this.queue.drain();\r\n    }\r\n\r\n    clearTrack(trackIndex: number) {\r\n        if (trackIndex >= this.tracks.length) return;\r\n        const current = this.tracks[trackIndex];\r\n\r\n        if (current == null) return;\r\n\r\n        this.queue.end(current);\r\n\r\n        this.disposeNext(current);\r\n\r\n        let entry = current;\r\n\r\n        while (true) {\r\n            const from = entry.mixingFrom;\r\n\r\n            if (from == null) break;\r\n            this.queue.end(from);\r\n            entry.mixingFrom = null;\r\n            entry.mixingTo = null;\r\n            entry = from;\r\n        }\r\n\r\n        this.tracks[current.trackIndex] = null;\r\n\r\n        this.queue.drain();\r\n    }\r\n\r\n    setCurrent(index: number, current: TrackEntry, interrupt: boolean) {\r\n        const from = this.expandToIndex(index);\r\n\r\n        this.tracks[index] = current;\r\n\r\n        if (from != null) {\r\n            if (interrupt) this.queue.interrupt(from);\r\n            current.mixingFrom = from;\r\n            from.mixingTo = current;\r\n            current.mixTime = 0;\r\n\r\n            // Store the interrupted mix percentage.\r\n            if (from.mixingFrom != null && from.mixDuration > 0) current.interruptAlpha *= Math.min(1, from.mixTime / from.mixDuration);\r\n\r\n            from.timelinesRotation.length = 0; // Reset rotation for mixing out, in case entry was mixed in.\r\n        }\r\n\r\n        this.queue.start(current);\r\n    }\r\n\r\n    setAnimation(trackIndex: number, animationName: string, loop: boolean) {\r\n        const animation = this.data.skeletonData.findAnimation(animationName);\r\n\r\n        if (animation == null) throw new Error(`Animation not found: ${animationName}`);\r\n\r\n        return this.setAnimationWith(trackIndex, animation, loop);\r\n    }\r\n\r\n    setAnimationWith(trackIndex: number, animation: Animation, loop: boolean) {\r\n        if (animation == null) throw new Error('animation cannot be null.');\r\n        let interrupt = true;\r\n        let current = this.expandToIndex(trackIndex);\r\n\r\n        if (current != null) {\r\n            if (current.nextTrackLast == -1) {\r\n                // Don't mix from an entry that was never applied.\r\n                this.tracks[trackIndex] = current.mixingFrom;\r\n                this.queue.interrupt(current);\r\n                this.queue.end(current);\r\n                this.disposeNext(current);\r\n                current = current.mixingFrom;\r\n                interrupt = false;\r\n            } else this.disposeNext(current);\r\n        }\r\n        const entry = this.trackEntry(trackIndex, animation, loop, current);\r\n\r\n        this.setCurrent(trackIndex, entry, interrupt);\r\n        this.queue.drain();\r\n\r\n        return entry;\r\n    }\r\n\r\n    addAnimation(trackIndex: number, animationName: string, loop: boolean, delay: number) {\r\n        const animation = this.data.skeletonData.findAnimation(animationName);\r\n\r\n        if (animation == null) throw new Error(`Animation not found: ${animationName}`);\r\n\r\n        return this.addAnimationWith(trackIndex, animation, loop, delay);\r\n    }\r\n\r\n    addAnimationWith(trackIndex: number, animation: Animation, loop: boolean, delay: number) {\r\n        if (animation == null) throw new Error('animation cannot be null.');\r\n\r\n        let last = this.expandToIndex(trackIndex);\r\n\r\n        if (last != null) {\r\n            while (last.next != null) last = last.next;\r\n        }\r\n\r\n        const entry = this.trackEntry(trackIndex, animation, loop, last);\r\n\r\n        if (last == null) {\r\n            this.setCurrent(trackIndex, entry, true);\r\n            this.queue.drain();\r\n        } else {\r\n            last.next = entry;\r\n            if (delay <= 0) {\r\n                const duration = last.animationEnd - last.animationStart;\r\n\r\n                if (duration != 0) {\r\n                    if (last.loop) delay += duration * (1 + ((last.trackTime / duration) | 0));\r\n                    else delay += Math.max(duration, last.trackTime);\r\n                    delay -= this.data.getMix(last.animation, animation);\r\n                } else delay = last.trackTime;\r\n            }\r\n        }\r\n\r\n        entry.delay = delay;\r\n\r\n        return entry;\r\n    }\r\n\r\n    setEmptyAnimation(trackIndex: number, mixDuration: number) {\r\n        const entry = this.setAnimationWith(trackIndex, AnimationState.emptyAnimation, false);\r\n\r\n        entry.mixDuration = mixDuration;\r\n        entry.trackEnd = mixDuration;\r\n\r\n        return entry;\r\n    }\r\n\r\n    addEmptyAnimation(trackIndex: number, mixDuration: number, delay: number) {\r\n        if (delay <= 0) delay -= mixDuration;\r\n        const entry = this.addAnimationWith(trackIndex, AnimationState.emptyAnimation, false, delay);\r\n\r\n        entry.mixDuration = mixDuration;\r\n        entry.trackEnd = mixDuration;\r\n\r\n        return entry;\r\n    }\r\n\r\n    setEmptyAnimations(mixDuration: number) {\r\n        const oldDrainDisabled = this.queue.drainDisabled;\r\n\r\n        this.queue.drainDisabled = true;\r\n        for (let i = 0, n = this.tracks.length; i < n; i++) {\r\n            const current = this.tracks[i];\r\n\r\n            if (current != null) this.setEmptyAnimation(current.trackIndex, mixDuration);\r\n        }\r\n        this.queue.drainDisabled = oldDrainDisabled;\r\n        this.queue.drain();\r\n    }\r\n\r\n    expandToIndex(index: number) {\r\n        if (index < this.tracks.length) return this.tracks[index];\r\n        Utils.ensureArrayCapacity(this.tracks, index - this.tracks.length + 1, null);\r\n        this.tracks.length = index + 1;\r\n\r\n        return null;\r\n    }\r\n\r\n    trackEntry(trackIndex: number, animation: Animation, loop: boolean, last: TrackEntry) {\r\n        const entry = this.trackEntryPool.obtain();\r\n\r\n        entry.trackIndex = trackIndex;\r\n        entry.animation = animation;\r\n        entry.loop = loop;\r\n        entry.holdPrevious = false;\r\n\r\n        entry.eventThreshold = 0;\r\n        entry.attachmentThreshold = 0;\r\n        entry.drawOrderThreshold = 0;\r\n\r\n        entry.animationStart = 0;\r\n        entry.animationEnd = animation.duration;\r\n        entry.animationLast = -1;\r\n        entry.nextAnimationLast = -1;\r\n\r\n        entry.delay = 0;\r\n        entry.trackTime = 0;\r\n        entry.trackLast = -1;\r\n        entry.nextTrackLast = -1;\r\n        entry.trackEnd = Number.MAX_VALUE;\r\n        entry.timeScale = 1;\r\n\r\n        entry.alpha = 1;\r\n        entry.interruptAlpha = 1;\r\n        entry.mixTime = 0;\r\n        entry.mixDuration = last == null ? 0 : this.data.getMix(last.animation, animation);\r\n\r\n        return entry;\r\n    }\r\n\r\n    disposeNext(entry: TrackEntry) {\r\n        let next = entry.next;\r\n\r\n        while (next != null) {\r\n            this.queue.dispose(next);\r\n            next = next.next;\r\n        }\r\n        entry.next = null;\r\n    }\r\n\r\n    _animationsChanged() {\r\n        this.animationsChanged = false;\r\n\r\n        this.propertyIDs.clear();\r\n\r\n        for (let i = 0, n = this.tracks.length; i < n; i++) {\r\n            let entry = this.tracks[i];\r\n\r\n            if (entry == null) continue;\r\n            while (entry.mixingFrom != null) entry = entry.mixingFrom;\r\n\r\n            do {\r\n                if (entry.mixingFrom == null || entry.mixBlend != MixBlend.add) this.setTimelineModes(entry);\r\n                entry = entry.mixingTo;\r\n            } while (entry != null);\r\n        }\r\n    }\r\n\r\n    setTimelineModes(entry: TrackEntry) {\r\n        const to = entry.mixingTo;\r\n        const timelines = entry.animation.timelines;\r\n        const timelinesCount = entry.animation.timelines.length;\r\n        const timelineMode = Utils.setArraySize(entry.timelineMode, timelinesCount);\r\n\r\n        entry.timelineHoldMix.length = 0;\r\n        const timelineDipMix = Utils.setArraySize(entry.timelineHoldMix, timelinesCount);\r\n        const propertyIDs = this.propertyIDs;\r\n\r\n        if (to != null && to.holdPrevious) {\r\n            for (let i = 0; i < timelinesCount; i++) {\r\n                propertyIDs.add(timelines[i].getPropertyId());\r\n                timelineMode[i] = AnimationState.HOLD;\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // eslint-disable-next-line no-restricted-syntax, no-labels\r\n        outer: for (let i = 0; i < timelinesCount; i++) {\r\n            const id = timelines[i].getPropertyId();\r\n\r\n            if (!propertyIDs.add(id)) timelineMode[i] = AnimationState.SUBSEQUENT;\r\n            else if (to == null || !this.hasTimeline(to, id)) timelineMode[i] = AnimationState.FIRST;\r\n            else {\r\n                for (let next = to.mixingTo; next != null; next = next.mixingTo) {\r\n                    if (this.hasTimeline(next, id)) continue;\r\n                    if (entry.mixDuration > 0) {\r\n                        timelineMode[i] = AnimationState.HOLD_MIX;\r\n                        timelineDipMix[i] = next;\r\n                        // eslint-disable-next-line no-labels\r\n                        continue outer;\r\n                    }\r\n                    break;\r\n                }\r\n                timelineMode[i] = AnimationState.HOLD;\r\n            }\r\n        }\r\n    }\r\n\r\n    hasTimeline(entry: TrackEntry, id: number): boolean {\r\n        const timelines = entry.animation.timelines;\r\n\r\n        for (let i = 0, n = timelines.length; i < n; i++) if (timelines[i].getPropertyId() == id) return true;\r\n\r\n        return false;\r\n    }\r\n\r\n    getCurrent(trackIndex: number) {\r\n        if (trackIndex >= this.tracks.length) return null;\r\n\r\n        return this.tracks[trackIndex];\r\n    }\r\n\r\n    addListener(listener: AnimationStateListener) {\r\n        if (listener == null) throw new Error('listener cannot be null.');\r\n        this.listeners.push(listener);\r\n    }\r\n\r\n    /** Removes the listener added with {@link #addListener(AnimationStateListener)}. */\r\n    removeListener(listener: AnimationStateListener) {\r\n        const index = this.listeners.indexOf(listener);\r\n\r\n        if (index >= 0) this.listeners.splice(index, 1);\r\n    }\r\n\r\n    clearListeners() {\r\n        this.listeners.length = 0;\r\n    }\r\n\r\n    clearListenerNotifications() {\r\n        this.queue.clear();\r\n    }\r\n\r\n    // deprecated stuff\r\n    onComplete: (trackIndex: number, loopCount: number) => any;\r\n    onEvent: (trackIndex: number, event: Event) => any;\r\n    onStart: (trackIndex: number) => any;\r\n    onEnd: (trackIndex: number) => any;\r\n\r\n    private static deprecatedWarning1 = false;\r\n\r\n    setAnimationByName(trackIndex: number, animationName: string, loop: boolean) {\r\n        if (!AnimationState.deprecatedWarning1) {\r\n            AnimationState.deprecatedWarning1 = true;\r\n            console.warn('Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.');\r\n        }\r\n        this.setAnimation(trackIndex, animationName, loop);\r\n    }\r\n\r\n    private static deprecatedWarning2 = false;\r\n\r\n    addAnimationByName(trackIndex: number, animationName: string, loop: boolean, delay: number) {\r\n        if (!AnimationState.deprecatedWarning2) {\r\n            AnimationState.deprecatedWarning2 = true;\r\n            console.warn('Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.');\r\n        }\r\n        this.addAnimation(trackIndex, animationName, loop, delay);\r\n    }\r\n\r\n    private static deprecatedWarning3 = false;\r\n\r\n    hasAnimation(animationName: string): boolean {\r\n        const animation = this.data.skeletonData.findAnimation(animationName);\r\n\r\n        return animation !== null;\r\n    }\r\n\r\n    hasAnimationByName(animationName: string): boolean {\r\n        if (!AnimationState.deprecatedWarning3) {\r\n            AnimationState.deprecatedWarning3 = true;\r\n            console.warn('Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.');\r\n        }\r\n\r\n        return this.hasAnimation(animationName);\r\n    }\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport class TrackEntry implements ITrackEntry {\r\n    animation: Animation;\r\n    next: TrackEntry;\r\n    mixingFrom: TrackEntry;\r\n    mixingTo: TrackEntry;\r\n    listener: AnimationStateListener;\r\n    trackIndex: number;\r\n    loop: boolean;\r\n    holdPrevious: boolean;\r\n    eventThreshold: number;\r\n    attachmentThreshold: number;\r\n    drawOrderThreshold: number;\r\n    animationStart: number;\r\n    animationEnd: number;\r\n    animationLast: number;\r\n    nextAnimationLast: number;\r\n    delay: number;\r\n    trackTime: number;\r\n    trackLast: number;\r\n    nextTrackLast: number;\r\n    trackEnd: number;\r\n    timeScale: number;\r\n    alpha: number;\r\n    mixTime: number;\r\n    mixDuration: number;\r\n    interruptAlpha: number;\r\n    totalAlpha: number;\r\n    mixBlend = MixBlend.replace;\r\n    timelineMode = new Array<number>();\r\n    timelineHoldMix = new Array<TrackEntry>();\r\n    timelinesRotation = new Array<number>();\r\n\r\n    reset() {\r\n        this.next = null;\r\n        this.mixingFrom = null;\r\n        this.mixingTo = null;\r\n        this.animation = null;\r\n        this.listener = null;\r\n        this.timelineMode.length = 0;\r\n        this.timelineHoldMix.length = 0;\r\n        this.timelinesRotation.length = 0;\r\n    }\r\n\r\n    getAnimationTime() {\r\n        if (this.loop) {\r\n            const duration = this.animationEnd - this.animationStart;\r\n\r\n            if (duration == 0) return this.animationStart;\r\n\r\n            return (this.trackTime % duration) + this.animationStart;\r\n        }\r\n\r\n        return Math.min(this.trackTime + this.animationStart, this.animationEnd);\r\n    }\r\n\r\n    setAnimationLast(animationLast: number) {\r\n        this.animationLast = animationLast;\r\n        this.nextAnimationLast = animationLast;\r\n    }\r\n\r\n    isComplete() {\r\n        return this.trackTime >= this.animationEnd - this.animationStart;\r\n    }\r\n\r\n    resetRotationDirections() {\r\n        this.timelinesRotation.length = 0;\r\n    }\r\n\r\n    // deprecated stuff\r\n    onComplete: (trackIndex: number, loopCount: number) => any;\r\n    onEvent: (trackIndex: number, event: Event) => any;\r\n    onStart: (trackIndex: number) => any;\r\n    onEnd: (trackIndex: number) => any;\r\n\r\n    private static deprecatedWarning1 = false;\r\n    private static deprecatedWarning2 = false;\r\n\r\n    get time() {\r\n        if (!TrackEntry.deprecatedWarning1) {\r\n            TrackEntry.deprecatedWarning1 = true;\r\n            console.warn('Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.');\r\n        }\r\n\r\n        return this.trackTime;\r\n    }\r\n\r\n    set time(value: number) {\r\n        if (!TrackEntry.deprecatedWarning1) {\r\n            TrackEntry.deprecatedWarning1 = true;\r\n            console.warn('Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.');\r\n        }\r\n        this.trackTime = value;\r\n    }\r\n\r\n    get endTime() {\r\n        if (!TrackEntry.deprecatedWarning2) {\r\n            TrackEntry.deprecatedWarning2 = true;\r\n            console.warn('Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.');\r\n        }\r\n\r\n        return this.trackTime;\r\n    }\r\n\r\n    set endTime(value: number) {\r\n        if (!TrackEntry.deprecatedWarning2) {\r\n            TrackEntry.deprecatedWarning2 = true;\r\n            console.warn('Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.');\r\n        }\r\n        this.trackTime = value;\r\n    }\r\n\r\n    loopsCount() {\r\n        return Math.floor(this.trackTime / this.trackEnd);\r\n    }\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport class EventQueue {\r\n    objects: Array<any> = [];\r\n    drainDisabled = false;\r\n    animState: AnimationState;\r\n\r\n    constructor(animState: AnimationState) {\r\n        this.animState = animState;\r\n    }\r\n\r\n    start(entry: TrackEntry) {\r\n        this.objects.push(EventType.start);\r\n        this.objects.push(entry);\r\n        this.animState.animationsChanged = true;\r\n    }\r\n\r\n    interrupt(entry: TrackEntry) {\r\n        this.objects.push(EventType.interrupt);\r\n        this.objects.push(entry);\r\n    }\r\n\r\n    end(entry: TrackEntry) {\r\n        this.objects.push(EventType.end);\r\n        this.objects.push(entry);\r\n        this.animState.animationsChanged = true;\r\n    }\r\n\r\n    dispose(entry: TrackEntry) {\r\n        this.objects.push(EventType.dispose);\r\n        this.objects.push(entry);\r\n    }\r\n\r\n    complete(entry: TrackEntry) {\r\n        this.objects.push(EventType.complete);\r\n        this.objects.push(entry);\r\n    }\r\n\r\n    event(entry: TrackEntry, event: Event) {\r\n        this.objects.push(EventType.event);\r\n        this.objects.push(entry);\r\n        this.objects.push(event);\r\n    }\r\n\r\n    private static deprecatedWarning1 = false;\r\n\r\n    deprecateStuff() {\r\n        if (!EventQueue.deprecatedWarning1) {\r\n            EventQueue.deprecatedWarning1 = true;\r\n            console.warn(\r\n                \"Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'\"\r\n            );\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    drain() {\r\n        if (this.drainDisabled) return;\r\n        this.drainDisabled = true;\r\n\r\n        const objects = this.objects;\r\n        const listeners = this.animState.listeners;\r\n\r\n        for (let i = 0; i < objects.length; i += 2) {\r\n            const type = objects[i] as EventType;\r\n            const entry = objects[i + 1] as TrackEntry;\r\n\r\n            switch (type) {\r\n                case EventType.start:\r\n                    if (entry.listener != null && entry.listener.start) entry.listener.start(entry);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].start) listeners[ii].start(entry);\r\n                    // deprecation\r\n                    entry.onStart && this.deprecateStuff() && entry.onStart(entry.trackIndex);\r\n                    this.animState.onStart && this.deprecateStuff() && this.deprecateStuff && this.animState.onStart(entry.trackIndex);\r\n                    break;\r\n                case EventType.interrupt:\r\n                    if (entry.listener != null && entry.listener.interrupt) entry.listener.interrupt(entry);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].interrupt) listeners[ii].interrupt(entry);\r\n                    break;\r\n                case EventType.end:\r\n                    if (entry.listener != null && entry.listener.end) entry.listener.end(entry);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].end) listeners[ii].end(entry);\r\n                    // deprecation\r\n                    entry.onEnd && this.deprecateStuff() && entry.onEnd(entry.trackIndex);\r\n                    this.animState.onEnd && this.deprecateStuff() && this.animState.onEnd(entry.trackIndex);\r\n                // Fall through.\r\n                case EventType.dispose:\r\n                    if (entry.listener != null && entry.listener.dispose) entry.listener.dispose(entry);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].dispose) listeners[ii].dispose(entry);\r\n                    this.animState.trackEntryPool.free(entry);\r\n                    break;\r\n                case EventType.complete:\r\n                    if (entry.listener != null && entry.listener.complete) entry.listener.complete(entry);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].complete) listeners[ii].complete(entry);\r\n                    // deprecation\r\n\r\n                    const count = MathUtils.toInt(entry.loopsCount());\r\n\r\n                    entry.onComplete && this.deprecateStuff() && entry.onComplete(entry.trackIndex, count);\r\n                    this.animState.onComplete && this.deprecateStuff() && this.animState.onComplete(entry.trackIndex, count);\r\n                    break;\r\n                case EventType.event:\r\n                    const event = objects[i++ + 2] as Event;\r\n\r\n                    if (entry.listener != null && entry.listener.event) entry.listener.event(entry, event);\r\n                    for (let ii = 0; ii < listeners.length; ii++) if (listeners[ii].event) listeners[ii].event(entry, event);\r\n                    // deprecation\r\n                    entry.onEvent && this.deprecateStuff() && entry.onEvent(entry.trackIndex, event);\r\n                    this.animState.onEvent && this.deprecateStuff() && this.animState.onEvent(entry.trackIndex, event);\r\n                    break;\r\n            }\r\n        }\r\n        this.clear();\r\n\r\n        this.drainDisabled = false;\r\n    }\r\n\r\n    clear() {\r\n        this.objects.length = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum EventType {\r\n    start,\r\n    interrupt,\r\n    end,\r\n    dispose,\r\n    complete,\r\n    event,\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport interface AnimationStateListener extends IAnimationStateListener {\r\n    /** Invoked when this entry has been set as the current entry. */\r\n    start?(entry: TrackEntry): void;\r\n\r\n    /** Invoked when another entry has replaced this entry as the current entry. This entry may continue being applied for\r\n     * mixing. */\r\n    interrupt?(entry: TrackEntry): void;\r\n\r\n    /** Invoked when this entry is no longer the current entry and will never be applied again. */\r\n    end?(entry: TrackEntry): void;\r\n\r\n    /** Invoked when this entry will be disposed. This may occur without the entry ever being set as the current entry.\r\n     * References to the entry should not be kept after dispose is called, as it may be destroyed or reused. */\r\n    dispose?(entry: TrackEntry): void;\r\n\r\n    /** Invoked every time this entry's animation completes a loop. */\r\n    complete?(entry: TrackEntry): void;\r\n\r\n    /** Invoked when this entry's animation triggers an event. */\r\n    event?(entry: TrackEntry, event: Event): void;\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport abstract class AnimationStateAdapter2 implements AnimationStateListener {\r\n    start(entry: TrackEntry) {}\r\n\r\n    interrupt(entry: TrackEntry) {}\r\n\r\n    end(entry: TrackEntry) {}\r\n\r\n    dispose(entry: TrackEntry) {}\r\n\r\n    complete(entry: TrackEntry) {}\r\n\r\n    event(entry: TrackEntry, event: Event) {}\r\n}\r\n"],"names":["EventType"],"mappings":"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"}