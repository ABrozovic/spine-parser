{"version":3,"file":"SpineDebugRenderer.mjs","sources":["../src/SpineDebugRenderer.ts"],"sourcesContent":["import { Container } from '@pixi/display';\r\nimport { Graphics } from '@pixi/graphics';\r\nimport type { IAnimationState, IAnimationStateData } from './core/IAnimation';\r\nimport type { IClippingAttachment, IMeshAttachment, IRegionAttachment, ISkeleton, ISkeletonData, IVertexAttachment } from './core/ISkeleton';\r\nimport type { SpineBase } from './SpineBase';\r\nimport { AttachmentType } from './core/AttachmentType';\r\nimport { SkeletonBoundsBase } from './core/SkeletonBoundsBase';\r\n\r\n/**\r\n * Make a class that extends from this interface to create your own debug renderer.\r\n * @public\r\n */\r\nexport interface ISpineDebugRenderer {\r\n    /**\r\n     * This will be called every frame, after the spine has been updated.\r\n     */\r\n    renderDebug(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>): void;\r\n\r\n    /**\r\n     *  This is called when the `spine.debug` object is set to null or when the spine is destroyed.\r\n     */\r\n    unregisterSpine(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>): void;\r\n\r\n    /**\r\n     * This is called when the `spine.debug` object is set to a new instance of a debug renderer.\r\n     */\r\n    registerSpine(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>): void;\r\n}\r\n\r\ntype DebugDisplayObjects = {\r\n    bones: Container;\r\n    skeletonXY: Graphics;\r\n    regionAttachmentsShape: Graphics;\r\n    meshTrianglesLine: Graphics;\r\n    meshHullLine: Graphics;\r\n    clippingPolygon: Graphics;\r\n    boundingBoxesRect: Graphics;\r\n    boundingBoxesCircle: Graphics;\r\n    boundingBoxesPolygon: Graphics;\r\n    pathsCurve: Graphics;\r\n    pathsLine: Graphics;\r\n    parentDebugContainer: Container;\r\n};\r\n\r\n/**\r\n * This is a debug renderer that uses PixiJS Graphics under the hood.\r\n * @public\r\n */\r\nexport class SpineDebugRenderer implements ISpineDebugRenderer {\r\n    private registeredSpines: Map<SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>, DebugDisplayObjects> = new Map();\r\n\r\n    public drawDebug = true;\r\n    public drawMeshHull = true;\r\n    public drawMeshTriangles = true;\r\n    public drawBones = true;\r\n    public drawPaths = true;\r\n    public drawBoundingBoxes = true;\r\n    public drawClipping = true;\r\n    public drawRegionAttachments = true;\r\n\r\n    public lineWidth = 1;\r\n    public regionAttachmentsColor = 0x0078ff;\r\n    public meshHullColor = 0x0078ff;\r\n    public meshTrianglesColor = 0xffcc00;\r\n    public clippingPolygonColor = 0xff00ff;\r\n    public boundingBoxesRectColor = 0x00ff00;\r\n    public boundingBoxesPolygonColor = 0x00ff00;\r\n    public boundingBoxesCircleColor = 0x00ff00;\r\n    public pathsCurveColor = 0xff0000;\r\n    public pathsLineColor = 0xff00ff;\r\n    public skeletonXYColor = 0xff0000;\r\n    public bonesColor = 0x00eecc;\r\n\r\n    /**\r\n     * The debug is attached by force to each spine object. So we need to create it inside the spine when we get the first update\r\n     */\r\n    public registerSpine(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>) {\r\n        if (this.registeredSpines.has(spine)) {\r\n            console.warn('SpineDebugRenderer.registerSpine() - this spine is already registered!', spine);\r\n        }\r\n        const debugDisplayObjects = {\r\n            parentDebugContainer: new Container(),\r\n            bones: new Container(),\r\n            skeletonXY: new Graphics(),\r\n            regionAttachmentsShape: new Graphics(),\r\n            meshTrianglesLine: new Graphics(),\r\n            meshHullLine: new Graphics(),\r\n            clippingPolygon: new Graphics(),\r\n            boundingBoxesRect: new Graphics(),\r\n            boundingBoxesCircle: new Graphics(),\r\n            boundingBoxesPolygon: new Graphics(),\r\n            pathsCurve: new Graphics(),\r\n            pathsLine: new Graphics(),\r\n        };\r\n\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.bones);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.skeletonXY);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.regionAttachmentsShape);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.meshTrianglesLine);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.meshHullLine);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.clippingPolygon);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.boundingBoxesRect);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.boundingBoxesCircle);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.boundingBoxesPolygon);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.pathsCurve);\r\n        debugDisplayObjects.parentDebugContainer.addChild(debugDisplayObjects.pathsLine);\r\n\r\n        spine.addChild(debugDisplayObjects.parentDebugContainer);\r\n\r\n        this.registeredSpines.set(spine, debugDisplayObjects);\r\n    }\r\n    public renderDebug(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>): void {\r\n        if (!this.registeredSpines.has(spine)) {\r\n            // This should never happen. Spines are registered when you assign spine.debug\r\n            this.registerSpine(spine);\r\n        }\r\n\r\n        const debugDisplayObjects = this.registeredSpines.get(spine);\r\n\r\n        debugDisplayObjects.skeletonXY.clear();\r\n        debugDisplayObjects.regionAttachmentsShape.clear();\r\n        debugDisplayObjects.meshTrianglesLine.clear();\r\n        debugDisplayObjects.meshHullLine.clear();\r\n        debugDisplayObjects.clippingPolygon.clear();\r\n        debugDisplayObjects.boundingBoxesRect.clear();\r\n        debugDisplayObjects.boundingBoxesCircle.clear();\r\n        debugDisplayObjects.boundingBoxesPolygon.clear();\r\n        debugDisplayObjects.pathsCurve.clear();\r\n        debugDisplayObjects.pathsLine.clear();\r\n\r\n        for (let len = debugDisplayObjects.bones.children.length; len > 0; len--) {\r\n            debugDisplayObjects.bones.children[len - 1].destroy({ children: true, texture: true, baseTexture: true });\r\n        }\r\n\r\n        const scale = spine.scale.x || spine.scale.y || 1;\r\n        const lineWidth = this.lineWidth / scale;\r\n\r\n        if (this.drawBones) {\r\n            this.drawBonesFunc(spine, debugDisplayObjects, lineWidth, scale);\r\n        }\r\n\r\n        if (this.drawPaths) {\r\n            this.drawPathsFunc(spine, debugDisplayObjects, lineWidth);\r\n        }\r\n\r\n        if (this.drawBoundingBoxes) {\r\n            this.drawBoundingBoxesFunc(spine, debugDisplayObjects, lineWidth);\r\n        }\r\n\r\n        if (this.drawClipping) {\r\n            this.drawClippingFunc(spine, debugDisplayObjects, lineWidth);\r\n        }\r\n\r\n        if (this.drawMeshHull || this.drawMeshTriangles) {\r\n            this.drawMeshHullAndMeshTriangles(spine, debugDisplayObjects, lineWidth);\r\n        }\r\n\r\n        if (this.drawRegionAttachments) {\r\n            this.drawRegionAttachmentsFunc(spine, debugDisplayObjects, lineWidth);\r\n        }\r\n    }\r\n\r\n    private drawBonesFunc(\r\n        spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>,\r\n        debugDisplayObjects: DebugDisplayObjects,\r\n        lineWidth: number,\r\n        scale: number\r\n    ): void {\r\n        const skeleton = spine.skeleton;\r\n        const skeletonX = skeleton.x;\r\n        const skeletonY = skeleton.y;\r\n        const bones = skeleton.bones;\r\n\r\n        debugDisplayObjects.skeletonXY.lineStyle(lineWidth, this.skeletonXYColor, 1);\r\n\r\n        for (let i = 0, len = bones.length; i < len; i++) {\r\n            const bone = bones[i];\r\n            const boneLen = bone.data.length;\r\n            const starX = skeletonX + bone.matrix.tx;\r\n            const starY = skeletonY + bone.matrix.ty;\r\n            const endX = skeletonX + boneLen * bone.matrix.a + bone.matrix.tx;\r\n            const endY = skeletonY + boneLen * bone.matrix.b + bone.matrix.ty;\r\n\r\n            if (bone.data.name === 'root' || bone.data.parent === null) {\r\n                continue;\r\n            }\r\n\r\n            // Triangle calculation formula\r\n            // area: A=sqrt((a+b+c)*(-a+b+c)*(a-b+c)*(a+b-c))/4\r\n            // alpha: alpha=acos((pow(b, 2)+pow(c, 2)-pow(a, 2))/(2*b*c))\r\n            // beta: beta=acos((pow(a, 2)+pow(c, 2)-pow(b, 2))/(2*a*c))\r\n            // gamma: gamma=acos((pow(a, 2)+pow(b, 2)-pow(c, 2))/(2*a*b))\r\n\r\n            const w = Math.abs(starX - endX);\r\n            const h = Math.abs(starY - endY);\r\n            // a = w, // side length a\r\n            const a2 = Math.pow(w, 2); // square root of side length a\r\n            const b = h; // side length b\r\n            const b2 = Math.pow(h, 2); // square root of side length b\r\n            const c = Math.sqrt(a2 + b2); // side length c\r\n            const c2 = Math.pow(c, 2); // square root of side length c\r\n            const rad = Math.PI / 180;\r\n            // A = Math.acos([a2 + c2 - b2] / [2 * a * c]) || 0, // Angle A\r\n            // C = Math.acos([a2 + b2 - c2] / [2 * a * b]) || 0, // C angle\r\n            const B = Math.acos((c2 + b2 - a2) / (2 * b * c)) || 0; // angle of corner B\r\n\r\n            if (c === 0) {\r\n                continue;\r\n            }\r\n\r\n            const gp = new Graphics();\r\n\r\n            debugDisplayObjects.bones.addChild(gp);\r\n\r\n            // draw bone\r\n            const refRation = c / 50 / scale;\r\n\r\n            gp.beginFill(this.bonesColor, 1);\r\n            gp.drawPolygon(0, 0, 0 - refRation, c - refRation * 3, 0, c - refRation, 0 + refRation, c - refRation * 3);\r\n            gp.endFill();\r\n            gp.x = starX;\r\n            gp.y = starY;\r\n            gp.pivot.y = c;\r\n\r\n            // Calculate bone rotation angle\r\n            let rotation = 0;\r\n\r\n            if (starX < endX && starY < endY) {\r\n                // bottom right\r\n                rotation = -B + 180 * rad;\r\n            } else if (starX > endX && starY < endY) {\r\n                // bottom left\r\n                rotation = 180 * rad + B;\r\n            } else if (starX > endX && starY > endY) {\r\n                // top left\r\n                rotation = -B;\r\n            } else if (starX < endX && starY > endY) {\r\n                // bottom left\r\n                rotation = B;\r\n            } else if (starY === endY && starX < endX) {\r\n                // To the right\r\n                rotation = 90 * rad;\r\n            } else if (starY === endY && starX > endX) {\r\n                // go left\r\n                rotation = -90 * rad;\r\n            } else if (starX === endX && starY < endY) {\r\n                // down\r\n                rotation = 180 * rad;\r\n            } else if (starX === endX && starY > endY) {\r\n                // up\r\n                rotation = 0;\r\n            }\r\n            gp.rotation = rotation;\r\n\r\n            // Draw the starting rotation point of the bone\r\n            gp.lineStyle(lineWidth + refRation / 2.4, this.bonesColor, 1);\r\n            gp.beginFill(0x000000, 0.6);\r\n            gp.drawCircle(0, c, refRation * 1.2);\r\n            gp.endFill();\r\n        }\r\n\r\n        // Draw the skeleton starting point \"X\" form\r\n        const startDotSize = lineWidth * 3;\r\n\r\n        debugDisplayObjects.skeletonXY.moveTo(skeletonX - startDotSize, skeletonY - startDotSize);\r\n        debugDisplayObjects.skeletonXY.lineTo(skeletonX + startDotSize, skeletonY + startDotSize);\r\n        debugDisplayObjects.skeletonXY.moveTo(skeletonX + startDotSize, skeletonY - startDotSize);\r\n        debugDisplayObjects.skeletonXY.lineTo(skeletonX - startDotSize, skeletonY + startDotSize);\r\n    }\r\n\r\n    private drawRegionAttachmentsFunc(\r\n        spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>,\r\n        debugDisplayObjects: DebugDisplayObjects,\r\n        lineWidth: number\r\n    ): void {\r\n        const skeleton = spine.skeleton;\r\n        const slots = skeleton.slots;\r\n\r\n        debugDisplayObjects.regionAttachmentsShape.lineStyle(lineWidth, this.regionAttachmentsColor, 1);\r\n\r\n        for (let i = 0, len = slots.length; i < len; i++) {\r\n            const slot = slots[i];\r\n            const attachment = slot.getAttachment();\r\n\r\n            if (attachment == null || attachment.type !== AttachmentType.Region) {\r\n                continue;\r\n            }\r\n\r\n            const regionAttachment = attachment as IRegionAttachment & {\r\n                computeWorldVertices: (slot: unknown, worldVertices: unknown, offset: unknown, stride: unknown) => void;\r\n                updateOffset?: () => void;\r\n            };\r\n\r\n            const vertices = new Float32Array(8);\r\n\r\n            if (regionAttachment.updateOffset) regionAttachment.updateOffset(); // We don't need this on all versions\r\n\r\n            regionAttachment.computeWorldVertices(slot, vertices, 0, 2);\r\n            debugDisplayObjects.regionAttachmentsShape.drawPolygon(Array.from(vertices.slice(0, 8)));\r\n        }\r\n    }\r\n\r\n    private drawMeshHullAndMeshTriangles(\r\n        spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>,\r\n        debugDisplayObjects: DebugDisplayObjects,\r\n        lineWidth: number\r\n    ): void {\r\n        const skeleton = spine.skeleton;\r\n        const slots = skeleton.slots;\r\n\r\n        debugDisplayObjects.meshHullLine.lineStyle(lineWidth, this.meshHullColor, 1);\r\n        debugDisplayObjects.meshTrianglesLine.lineStyle(lineWidth, this.meshTrianglesColor, 1);\r\n\r\n        for (let i = 0, len = slots.length; i < len; i++) {\r\n            const slot = slots[i];\r\n\r\n            if (!slot.bone.active) {\r\n                continue;\r\n            }\r\n            const attachment = slot.getAttachment();\r\n\r\n            if (attachment == null || attachment.type !== AttachmentType.Mesh) {\r\n                continue;\r\n            }\r\n\r\n            const meshAttachment: IMeshAttachment = attachment as IMeshAttachment;\r\n\r\n            const vertices = new Float32Array(meshAttachment.worldVerticesLength);\r\n            const triangles = meshAttachment.triangles;\r\n            let hullLength = meshAttachment.hullLength;\r\n\r\n            meshAttachment.computeWorldVertices(slot, 0, meshAttachment.worldVerticesLength, vertices, 0, 2);\r\n            // draw the skinned mesh (triangle)\r\n            if (this.drawMeshTriangles) {\r\n                for (let i = 0, len = triangles.length; i < len; i += 3) {\r\n                    const v1 = triangles[i] * 2;\r\n                    const v2 = triangles[i + 1] * 2;\r\n                    const v3 = triangles[i + 2] * 2;\r\n\r\n                    debugDisplayObjects.meshTrianglesLine.moveTo(vertices[v1], vertices[v1 + 1]);\r\n                    debugDisplayObjects.meshTrianglesLine.lineTo(vertices[v2], vertices[v2 + 1]);\r\n                    debugDisplayObjects.meshTrianglesLine.lineTo(vertices[v3], vertices[v3 + 1]);\r\n                }\r\n            }\r\n\r\n            // draw skin border\r\n            if (this.drawMeshHull && hullLength > 0) {\r\n                hullLength = (hullLength >> 1) * 2;\r\n                let lastX = vertices[hullLength - 2];\r\n                let lastY = vertices[hullLength - 1];\r\n\r\n                for (let i = 0, len = hullLength; i < len; i += 2) {\r\n                    const x = vertices[i];\r\n                    const y = vertices[i + 1];\r\n\r\n                    debugDisplayObjects.meshHullLine.moveTo(x, y);\r\n                    debugDisplayObjects.meshHullLine.lineTo(lastX, lastY);\r\n                    lastX = x;\r\n                    lastY = y;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawClippingFunc(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>, debugDisplayObjects: DebugDisplayObjects, lineWidth: number): void {\r\n        const skeleton = spine.skeleton;\r\n        const slots = skeleton.slots;\r\n\r\n        debugDisplayObjects.clippingPolygon.lineStyle(lineWidth, this.clippingPolygonColor, 1);\r\n        for (let i = 0, len = slots.length; i < len; i++) {\r\n            const slot = slots[i];\r\n\r\n            if (!slot.bone.active) {\r\n                continue;\r\n            }\r\n            const attachment = slot.getAttachment();\r\n\r\n            if (attachment == null || attachment.type !== AttachmentType.Clipping) {\r\n                continue;\r\n            }\r\n\r\n            const clippingAttachment: IClippingAttachment = attachment as IClippingAttachment;\r\n\r\n            const nn = clippingAttachment.worldVerticesLength;\r\n            const world = new Float32Array(nn);\r\n\r\n            clippingAttachment.computeWorldVertices(slot, 0, nn, world, 0, 2);\r\n            debugDisplayObjects.clippingPolygon.drawPolygon(Array.from(world));\r\n        }\r\n    }\r\n\r\n    private drawBoundingBoxesFunc(\r\n        spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>,\r\n        debugDisplayObjects: DebugDisplayObjects,\r\n        lineWidth: number\r\n    ): void {\r\n        // draw the total outline of the bounding box\r\n        debugDisplayObjects.boundingBoxesRect.lineStyle(lineWidth, this.boundingBoxesRectColor, 5);\r\n\r\n        const bounds = new SkeletonBoundsBase();\r\n\r\n        bounds.update(spine.skeleton, true);\r\n        debugDisplayObjects.boundingBoxesRect.drawRect(bounds.minX, bounds.minY, bounds.getWidth(), bounds.getHeight());\r\n\r\n        const polygons = bounds.polygons;\r\n        const drawPolygon = (polygonVertices: ArrayLike<number>, _offset: unknown, count: number): void => {\r\n            debugDisplayObjects.boundingBoxesPolygon.lineStyle(lineWidth, this.boundingBoxesPolygonColor, 1);\r\n            debugDisplayObjects.boundingBoxesPolygon.beginFill(this.boundingBoxesPolygonColor, 0.1);\r\n\r\n            if (count < 3) {\r\n                throw new Error('Polygon must contain at least 3 vertices');\r\n            }\r\n            const paths = [];\r\n            const dotSize = lineWidth * 2;\r\n\r\n            for (let i = 0, len = polygonVertices.length; i < len; i += 2) {\r\n                const x1 = polygonVertices[i];\r\n                const y1 = polygonVertices[i + 1];\r\n\r\n                // draw the bounding box node\r\n                debugDisplayObjects.boundingBoxesCircle.lineStyle(0);\r\n                debugDisplayObjects.boundingBoxesCircle.beginFill(this.boundingBoxesCircleColor);\r\n                debugDisplayObjects.boundingBoxesCircle.drawCircle(x1, y1, dotSize);\r\n                debugDisplayObjects.boundingBoxesCircle.endFill();\r\n\r\n                paths.push(x1, y1);\r\n            }\r\n\r\n            // draw the bounding box area\r\n            debugDisplayObjects.boundingBoxesPolygon.drawPolygon(paths);\r\n            debugDisplayObjects.boundingBoxesPolygon.endFill();\r\n        };\r\n\r\n        for (let i = 0, len = polygons.length; i < len; i++) {\r\n            const polygon = polygons[i];\r\n\r\n            drawPolygon(polygon, 0, polygon.length);\r\n        }\r\n    }\r\n\r\n    private drawPathsFunc(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>, debugDisplayObjects: DebugDisplayObjects, lineWidth: number): void {\r\n        const skeleton = spine.skeleton;\r\n        const slots = skeleton.slots;\r\n\r\n        debugDisplayObjects.pathsCurve.lineStyle(lineWidth, this.pathsCurveColor, 1);\r\n        debugDisplayObjects.pathsLine.lineStyle(lineWidth, this.pathsLineColor, 1);\r\n\r\n        for (let i = 0, len = slots.length; i < len; i++) {\r\n            const slot = slots[i];\r\n\r\n            if (!slot.bone.active) {\r\n                continue;\r\n            }\r\n            const attachment = slot.getAttachment();\r\n\r\n            if (attachment == null || attachment.type !== AttachmentType.Path) {\r\n                continue;\r\n            }\r\n\r\n            const pathAttachment = attachment as IVertexAttachment & { closed: boolean };\r\n            let nn = pathAttachment.worldVerticesLength;\r\n            const world = new Float32Array(nn);\r\n\r\n            pathAttachment.computeWorldVertices(slot, 0, nn, world, 0, 2);\r\n            let x1 = world[2];\r\n            let y1 = world[3];\r\n            let x2 = 0;\r\n            let y2 = 0;\r\n\r\n            if (pathAttachment.closed) {\r\n                const cx1 = world[0];\r\n                const cy1 = world[1];\r\n                const cx2 = world[nn - 2];\r\n                const cy2 = world[nn - 1];\r\n\r\n                x2 = world[nn - 4];\r\n                y2 = world[nn - 3];\r\n\r\n                // curve\r\n                debugDisplayObjects.pathsCurve.moveTo(x1, y1);\r\n                debugDisplayObjects.pathsCurve.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\r\n\r\n                // handle\r\n                debugDisplayObjects.pathsLine.moveTo(x1, y1);\r\n                debugDisplayObjects.pathsLine.lineTo(cx1, cy1);\r\n                debugDisplayObjects.pathsLine.moveTo(x2, y2);\r\n                debugDisplayObjects.pathsLine.lineTo(cx2, cy2);\r\n            }\r\n            nn -= 4;\r\n            for (let ii = 4; ii < nn; ii += 6) {\r\n                const cx1 = world[ii];\r\n                const cy1 = world[ii + 1];\r\n                const cx2 = world[ii + 2];\r\n                const cy2 = world[ii + 3];\r\n\r\n                x2 = world[ii + 4];\r\n                y2 = world[ii + 5];\r\n                // curve\r\n                debugDisplayObjects.pathsCurve.moveTo(x1, y1);\r\n                debugDisplayObjects.pathsCurve.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\r\n\r\n                // handle\r\n                debugDisplayObjects.pathsLine.moveTo(x1, y1);\r\n                debugDisplayObjects.pathsLine.lineTo(cx1, cy1);\r\n                debugDisplayObjects.pathsLine.moveTo(x2, y2);\r\n                debugDisplayObjects.pathsLine.lineTo(cx2, cy2);\r\n                x1 = x2;\r\n                y1 = y2;\r\n            }\r\n        }\r\n    }\r\n\r\n    public unregisterSpine(spine: SpineBase<ISkeleton, ISkeletonData, IAnimationState, IAnimationStateData>): void {\r\n        if (!this.registeredSpines.has(spine)) {\r\n            console.warn(\"SpineDebugRenderer.unregisterSpine() - spine is not registered, can't unregister!\", spine);\r\n        }\r\n        const debugDisplayObjects = this.registeredSpines.get(spine);\r\n\r\n        debugDisplayObjects.parentDebugContainer.destroy({ baseTexture: true, children: true, texture: true });\r\n        this.registeredSpines.delete(spine);\r\n    }\r\n}\r\n"],"names":["i","len"],"mappings":"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"}